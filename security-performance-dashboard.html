<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DC TEKNİK - Security & Performance Dashboard</title>
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.webmanifest">
    <link rel="icon" href="favicon-new.svg" type="image/svg+xml">
    
    <!-- Chart.js for data visualization -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <style>
        .security-performance-dashboard {
            padding: 20px;
            max-width: 1400px;
            margin: 0 auto;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        .dashboard-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 30px;
            text-align: center;
        }
        
        .dashboard-title {
            font-size: 2.5rem;
            margin-bottom: 10px;
            font-weight: 700;
        }
        
        .dashboard-subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
        }
        
        .dashboard-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            text-align: center;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.15);
        }
        
        .stat-icon {
            font-size: 3rem;
            margin-bottom: 15px;
        }
        
        .stat-number {
            font-size: 2.5rem;
            font-weight: 700;
            color: #333;
            margin-bottom: 5px;
        }
        
        .stat-label {
            font-size: 1rem;
            color: #666;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .dashboard-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }
        
        .chart-container {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        
        .chart-title {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 20px;
            color: #333;
        }
        
        .security-status {
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .security-status-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px 25px;
            font-size: 1.3rem;
            font-weight: 600;
        }
        
        .security-status-content {
            padding: 25px;
        }
        
        .security-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid #eee;
        }
        
        .security-item:last-child {
            border-bottom: none;
        }
        
        .security-item-name {
            font-weight: 600;
            color: #333;
        }
        
        .security-status-badge {
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
        }
        
        .status-active {
            background: #d4edda;
            color: #155724;
        }
        
        .status-warning {
            background: #fff3cd;
            color: #856404;
        }
        
        .status-danger {
            background: #f8d7da;
            color: #721c24;
        }
        
        .performance-metrics {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .metric-card {
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            text-align: center;
        }
        
        .metric-value {
            font-size: 2rem;
            font-weight: 700;
            color: #333;
            margin-bottom: 10px;
        }
        
        .metric-label {
            font-size: 0.9rem;
            color: #666;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .metric-trend {
            font-size: 0.8rem;
            margin-top: 5px;
        }
        
        .trend-up {
            color: #28a745;
        }
        
        .trend-down {
            color: #dc3545;
        }
        
        .trend-stable {
            color: #6c757d;
        }
        
        .security-events {
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            overflow: hidden;
            margin-bottom: 30px;
        }
        
        .security-events-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px 25px;
            font-size: 1.3rem;
            font-weight: 600;
        }
        
        .security-events-content {
            padding: 25px;
            max-height: 400px;
            overflow-y: auto;
        }
        
        .security-event {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid #eee;
        }
        
        .security-event:last-child {
            border-bottom: none;
        }
        
        .event-type {
            font-weight: 600;
            color: #333;
        }
        
        .event-time {
            font-size: 0.8rem;
            color: #666;
        }
        
        .event-severity {
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 0.7rem;
            font-weight: 600;
            text-transform: uppercase;
        }
        
        .severity-low {
            background: #d4edda;
            color: #155724;
        }
        
        .severity-medium {
            background: #fff3cd;
            color: #856404;
        }
        
        .severity-high {
            background: #f8d7da;
            color: #721c24;
        }
        
        .action-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
            justify-content: center;
        }
        
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            text-align: center;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }
        
        .btn-secondary {
            background: #6c757d;
            color: white;
        }
        
        .btn-secondary:hover {
            background: #5a6268;
            transform: translateY(-2px);
        }
        
        .btn-success {
            background: #28a745;
            color: white;
        }
        
        .btn-success:hover {
            background: #218838;
            transform: translateY(-2px);
        }
        
        .btn-warning {
            background: #ffc107;
            color: #212529;
        }
        
        .btn-warning:hover {
            background: #e0a800;
            transform: translateY(-2px);
        }
        
        .btn-danger {
            background: #dc3545;
            color: white;
        }
        
        .btn-danger:hover {
            background: #c82333;
            transform: translateY(-2px);
        }
        
        .loading {
            text-align: center;
            padding: 40px;
            color: #666;
        }
        
        .error {
            background: #f8d7da;
            color: #721c24;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        
        .success {
            background: #d4edda;
            color: #155724;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        
        @media (max-width: 768px) {
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
            
            .dashboard-stats {
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            }
            
            .performance-metrics {
                grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            }
        }
    </style>
</head>
<body>
    <div class="security-performance-dashboard">
        <!-- Header -->
        <div class="dashboard-header">
            <h1 class="dashboard-title">🔒 Security & Performance Dashboard</h1>
            <p class="dashboard-subtitle">DC TEKNİK - Güvenlik ve Performans İzleme Paneli</p>
        </div>
        
        <!-- Statistics Cards -->
        <div class="dashboard-stats">
            <div class="stat-card">
                <div class="stat-icon">🛡️</div>
                <div class="stat-number" id="securityScore">-</div>
                <div class="stat-label">Güvenlik Skoru</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">⚡</div>
                <div class="stat-number" id="performanceScore">-</div>
                <div class="stat-label">Performans Skoru</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">🚨</div>
                <div class="stat-number" id="securityThreats">-</div>
                <div class="stat-label">Güvenlik Tehdidi</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">📊</div>
                <div class="stat-number" id="uptime">-</div>
                <div class="stat-label">Çalışma Süresi</div>
            </div>
        </div>
        
        <!-- Performance Metrics -->
        <div class="performance-metrics">
            <div class="metric-card">
                <div class="metric-value" id="pageLoadTime">-</div>
                <div class="metric-label">Sayfa Yükleme Süresi</div>
                <div class="metric-trend trend-stable" id="pageLoadTrend">-</div>
            </div>
            <div class="metric-card">
                <div class="metric-value" id="firstContentfulPaint">-</div>
                <div class="metric-label">İlk İçerik Boyama</div>
                <div class="metric-trend trend-stable" id="fcpTrend">-</div>
            </div>
            <div class="metric-card">
                <div class="metric-value" id="largestContentfulPaint">-</div>
                <div class="metric-label">En Büyük İçerik Boyama</div>
                <div class="metric-trend trend-stable" id="lcpTrend">-</div>
            </div>
            <div class="metric-card">
                <div class="metric-value" id="firstInputDelay">-</div>
                <div class="metric-label">İlk Giriş Gecikmesi</div>
                <div class="metric-trend trend-stable" id="fidTrend">-</div>
            </div>
            <div class="metric-card">
                <div class="metric-value" id="cumulativeLayoutShift">-</div>
                <div class="metric-label">Kümülatif Düzen Kayması</div>
                <div class="metric-trend trend-stable" id="clsTrend">-</div>
            </div>
            <div class="metric-card">
                <div class="metric-value" id="cacheHitRate">-</div>
                <div class="metric-label">Önbellek İsabet Oranı</div>
                <div class="metric-trend trend-stable" id="cacheTrend">-</div>
            </div>
        </div>
        
        <!-- Main Dashboard Grid -->
        <div class="dashboard-grid">
            <!-- Performance Charts -->
            <div class="chart-container">
                <h3 class="chart-title">⚡ Performans Metrikleri</h3>
                <canvas id="performanceChart" width="400" height="200"></canvas>
            </div>
            
            <!-- Security Status -->
            <div class="security-status">
                <div class="security-status-header">
                    🛡️ Güvenlik Durumu
                </div>
                <div class="security-status-content">
                    <div class="security-item">
                        <span class="security-item-name">XSS Koruması</span>
                        <span class="security-status-badge status-active" id="xssProtection">Aktif</span>
                    </div>
                    <div class="security-item">
                        <span class="security-item-name">CSRF Koruması</span>
                        <span class="security-status-badge status-active" id="csrfProtection">Aktif</span>
                    </div>
                    <div class="security-item">
                        <span class="security-item-name">Clickjacking Koruması</span>
                        <span class="security-status-badge status-active" id="clickjackingProtection">Aktif</span>
                    </div>
                    <div class="security-item">
                        <span class="security-item-name">Rate Limiting</span>
                        <span class="security-status-badge status-active" id="rateLimiting">Aktif</span>
                    </div>
                    <div class="security-item">
                        <span class="security-item-name">SSL/TLS</span>
                        <span class="security-status-badge status-active" id="sslTls">Aktif</span>
                    </div>
                    <div class="security-item">
                        <span class="security-item-name">Güvenlik Başlıkları</span>
                        <span class="security-status-badge status-active" id="securityHeaders">Aktif</span>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Security Events -->
        <div class="security-events">
            <div class="security-events-header">
                🚨 Güvenlik Olayları
            </div>
            <div class="security-events-content" id="securityEventsList">
                <div class="loading">Güvenlik olayları yükleniyor...</div>
            </div>
        </div>
        
        <!-- CDN Performance -->
        <div class="chart-container" style="margin-bottom: 30px;">
            <h3 class="chart-title">🌐 CDN Performansı</h3>
            <canvas id="cdnChart" width="400" height="200"></canvas>
        </div>
        
        <!-- Security Threats -->
        <div class="chart-container" style="margin-bottom: 30px;">
            <h3 class="chart-title">🛡️ Güvenlik Tehditleri</h3>
            <canvas id="securityChart" width="400" height="200"></canvas>
        </div>
        
        <!-- Action Buttons -->
        <div class="action-buttons">
            <button class="btn btn-primary" onclick="runSecurityScan()">🔍 Güvenlik Taraması</button>
            <button class="btn btn-secondary" onclick="optimizePerformance()">⚡ Performans Optimizasyonu</button>
            <button class="btn btn-success" onclick="viewSecurityReport()">📊 Güvenlik Raporu</button>
            <button class="btn btn-warning" onclick="viewPerformanceReport()">📈 Performans Raporu</button>
            <button class="btn btn-danger" onclick="emergencyLockdown()">🚨 Acil Kilitleme</button>
        </div>
    </div>
    
    <!-- Scripts -->
    <script src="js/advanced-security.js"></script>
    <script src="js/performance-optimizer.js"></script>
    <script src="js/cdn-integration.js"></script>
    
    <script>
        // Global variables
        let performanceChart;
        let cdnChart;
        let securityChart;
        let dashboardData = {};
        
        // Initialize dashboard
        document.addEventListener('DOMContentLoaded', function() {
            console.log('🔒 Security & Performance Dashboard initialized');
            initializeCharts();
            loadDashboardData();
            setupEventListeners();
            startRealTimeMonitoring();
        });
        
        // Initialize charts
        function initializeCharts() {
            // Performance Chart
            const performanceCtx = document.getElementById('performanceChart').getContext('2d');
            performanceChart = new Chart(performanceCtx, {
                type: 'line',
                data: {
                    labels: [],
                    datasets: [{
                        label: 'Sayfa Yükleme Süresi (ms)',
                        data: [],
                        borderColor: '#667eea',
                        backgroundColor: 'rgba(102, 126, 234, 0.1)',
                        tension: 0.4,
                        fill: true
                    }, {
                        label: 'İlk İçerik Boyama (ms)',
                        data: [],
                        borderColor: '#764ba2',
                        backgroundColor: 'rgba(118, 75, 162, 0.1)',
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            display: true,
                            position: 'top'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return value + 'ms';
                                }
                            }
                        }
                    }
                }
            });
            
            // CDN Chart
            const cdnCtx = document.getElementById('cdnChart').getContext('2d');
            cdnChart = new Chart(cdnCtx, {
                type: 'bar',
                data: {
                    labels: ['Cloudflare', 'jsDelivr', 'UNPKG'],
                    datasets: [{
                        label: 'Yanıt Süresi (ms)',
                        data: [],
                        backgroundColor: ['#667eea', '#764ba2', '#f093fb'],
                        borderColor: ['#667eea', '#764ba2', '#f093fb'],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return value + 'ms';
                                }
                            }
                        }
                    }
                }
            });
            
            // Security Chart
            const securityCtx = document.getElementById('securityChart').getContext('2d');
            securityChart = new Chart(securityCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Güvenli', 'Orta Risk', 'Yüksek Risk'],
                    datasets: [{
                        data: [0, 0, 0],
                        backgroundColor: ['#28a745', '#ffc107', '#dc3545'],
                        borderWidth: 2,
                        borderColor: '#fff'
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    }
                }
            });
        }
        
        // Load dashboard data
        async function loadDashboardData() {
            try {
                console.log('📊 Loading dashboard data...');
                
                // Load security data
                await loadSecurityData();
                
                // Load performance data
                await loadPerformanceData();
                
                // Load CDN data
                await loadCDNData();
                
                // Load security events
                await loadSecurityEvents();
                
                console.log('✅ Dashboard data loaded successfully');
            } catch (error) {
                console.error('❌ Error loading dashboard data:', error);
                showError('Veri yüklenirken hata oluştu: ' + error.message);
            }
        }
        
        // Load security data
        async function loadSecurityData() {
            try {
                const securityStatus = window.advancedSecurity?.getSecurityStatus() || {};
                const securityReport = window.advancedSecurity?.getSecurityReport() || {};
                
                // Update security score
                const securityScore = calculateSecurityScore(securityStatus);
                document.getElementById('securityScore').textContent = securityScore;
                
                // Update security threats
                const threats = securityStatus.recentEvents?.filter(event => 
                    event.type.includes('threat') || event.type.includes('attack')
                ).length || 0;
                document.getElementById('securityThreats').textContent = threats;
                
                // Update security chart
                updateSecurityChart(securityReport);
                
                // Update security status badges
                updateSecurityStatusBadges(securityStatus);
                
            } catch (error) {
                console.error('Error loading security data:', error);
            }
        }
        
        // Load performance data
        async function loadPerformanceData() {
            try {
                const performanceMetrics = window.performanceOptimizer?.getPerformanceMetrics() || {};
                const performanceReport = window.performanceOptimizer?.getOptimizationReport() || {};
                
                // Update performance score
                const performanceScore = calculatePerformanceScore(performanceMetrics);
                document.getElementById('performanceScore').textContent = performanceScore;
                
                // Update performance metrics
                updatePerformanceMetrics(performanceMetrics);
                
                // Update performance chart
                updatePerformanceChart(performanceMetrics);
                
            } catch (error) {
                console.error('Error loading performance data:', error);
            }
        }
        
        // Load CDN data
        async function loadCDNData() {
            try {
                const cdnMetrics = window.cdnIntegration?.getCDNMetrics() || {};
                const cdnReport = window.cdnIntegration?.getCDNReport() || {};
                
                // Update CDN metrics
                updateCDNMetrics(cdnMetrics);
                
                // Update CDN chart
                updateCDNChart(cdnMetrics);
                
            } catch (error) {
                console.error('Error loading CDN data:', error);
            }
        }
        
        // Load security events
        async function loadSecurityEvents() {
            try {
                const securityStatus = window.advancedSecurity?.getSecurityStatus() || {};
                const events = securityStatus.recentEvents || [];
                
                updateSecurityEvents(events);
                
            } catch (error) {
                console.error('Error loading security events:', error);
            }
        }
        
        // Calculate security score
        function calculateSecurityScore(securityStatus) {
            let score = 100;
            
            // Deduct points for threats
            const threats = securityStatus.recentEvents?.filter(event => 
                event.type.includes('threat') || event.type.includes('attack')
            ).length || 0;
            
            score -= threats * 10;
            
            // Deduct points for vulnerabilities
            const vulnerabilities = securityStatus.vulnerabilityScans?.filter(scan => 
                scan.vulnerabilities.length > 0
            ).length || 0;
            
            score -= vulnerabilities * 5;
            
            return Math.max(0, Math.min(100, score));
        }
        
        // Calculate performance score
        function calculatePerformanceScore(performanceMetrics) {
            let score = 100;
            
            // Deduct points for slow metrics
            if (performanceMetrics.largestContentfulPaint > 2500) score -= 20;
            if (performanceMetrics.firstInputDelay > 100) score -= 15;
            if (performanceMetrics.cumulativeLayoutShift > 0.1) score -= 15;
            if (performanceMetrics.pageLoadTime > 3000) score -= 10;
            
            return Math.max(0, Math.min(100, score));
        }
        
        // Update performance metrics
        function updatePerformanceMetrics(metrics) {
            document.getElementById('pageLoadTime').textContent = (metrics.pageLoadTime || 0).toFixed(0) + 'ms';
            document.getElementById('firstContentfulPaint').textContent = (metrics.firstContentfulPaint || 0).toFixed(0) + 'ms';
            document.getElementById('largestContentfulPaint').textContent = (metrics.largestContentfulPaint || 0).toFixed(0) + 'ms';
            document.getElementById('firstInputDelay').textContent = (metrics.firstInputDelay || 0).toFixed(0) + 'ms';
            document.getElementById('cumulativeLayoutShift').textContent = (metrics.cumulativeLayoutShift || 0).toFixed(3);
            document.getElementById('cacheHitRate').textContent = ((metrics.cacheHitRate || 0) * 100).toFixed(1) + '%';
        }
        
        // Update performance chart
        function updatePerformanceChart(metrics) {
            const now = new Date();
            const timeLabel = now.toLocaleTimeString('tr-TR', { hour: '2-digit', minute: '2-digit' });
            
            performanceChart.data.labels.push(timeLabel);
            performanceChart.data.datasets[0].data.push(metrics.pageLoadTime || 0);
            performanceChart.data.datasets[1].data.push(metrics.firstContentfulPaint || 0);
            
            // Keep only last 20 data points
            if (performanceChart.data.labels.length > 20) {
                performanceChart.data.labels.shift();
                performanceChart.data.datasets[0].data.shift();
                performanceChart.data.datasets[1].data.shift();
            }
            
            performanceChart.update();
        }
        
        // Update security chart
        function updateSecurityChart(securityReport) {
            const vulnerabilities = securityReport.vulnerabilities || [];
            const highRisk = vulnerabilities.filter(v => v.severity === 'high').length;
            const mediumRisk = vulnerabilities.filter(v => v.severity === 'medium').length;
            const lowRisk = vulnerabilities.filter(v => v.severity === 'low').length;
            
            securityChart.data.datasets[0].data = [lowRisk, mediumRisk, highRisk];
            securityChart.update();
        }
        
        // Update CDN chart
        function updateCDNChart(cdnMetrics) {
            const providers = cdnMetrics.providers || {};
            const responseTimes = [
                providers.cloudflare?.averageResponseTime || 0,
                providers.jsdelivr?.averageResponseTime || 0,
                providers.unpkg?.averageResponseTime || 0
            ];
            
            cdnChart.data.datasets[0].data = responseTimes;
            cdnChart.update();
        }
        
        // Update CDN metrics
        function updateCDNMetrics(cdnMetrics) {
            const cacheHitRate = cdnMetrics.cacheHits / (cdnMetrics.cacheHits + cdnMetrics.cacheMisses) || 0;
            document.getElementById('cacheHitRate').textContent = (cacheHitRate * 100).toFixed(1) + '%';
        }
        
        // Update security status badges
        function updateSecurityStatusBadges(securityStatus) {
            const config = securityStatus.config || {};
            
            updateBadge('xssProtection', config.xssProtection);
            updateBadge('csrfProtection', config.csrfProtection);
            updateBadge('clickjackingProtection', config.clickjackingProtection);
            updateBadge('rateLimiting', config.rateLimiting);
            updateBadge('sslTls', location.protocol === 'https:');
            updateBadge('securityHeaders', true);
        }
        
        // Update badge
        function updateBadge(elementId, isActive) {
            const element = document.getElementById(elementId);
            if (element) {
                element.textContent = isActive ? 'Aktif' : 'Pasif';
                element.className = `security-status-badge ${isActive ? 'status-active' : 'status-danger'}`;
            }
        }
        
        // Update security events
        function updateSecurityEvents(events) {
            const eventsList = document.getElementById('securityEventsList');
            
            if (events.length === 0) {
                eventsList.innerHTML = '<div class="loading">Güvenlik olayı bulunamadı</div>';
                return;
            }
            
            eventsList.innerHTML = events.slice(-10).map(event => `
                <div class="security-event">
                    <div>
                        <div class="event-type">${event.type}</div>
                        <div class="event-time">${new Date(event.timestamp).toLocaleString('tr-TR')}</div>
                    </div>
                    <div class="event-severity severity-${getSeverityLevel(event.type)}">${getSeverityLevel(event.type)}</div>
                </div>
            `).join('');
        }
        
        // Get severity level
        function getSeverityLevel(eventType) {
            if (eventType.includes('attack') || eventType.includes('threat')) {
                return 'high';
            } else if (eventType.includes('warning') || eventType.includes('suspicious')) {
                return 'medium';
            } else {
                return 'low';
            }
        }
        
        // Event listeners
        function setupEventListeners() {
            // Listen for security events
            document.addEventListener('security:event', function(event) {
                loadSecurityData();
            });
            
            // Listen for performance events
            document.addEventListener('performance:update', function(event) {
                loadPerformanceData();
            });
        }
        
        // Start real-time monitoring
        function startRealTimeMonitoring() {
            // Update dashboard every 30 seconds
            setInterval(() => {
                loadDashboardData();
            }, 30 * 1000);
            
            // Update uptime every second
            setInterval(() => {
                updateUptime();
            }, 1000);
        }
        
        // Update uptime
        function updateUptime() {
            const startTime = new Date().getTime() - (performance.timing.navigationStart || 0);
            const uptime = formatUptime(startTime);
            document.getElementById('uptime').textContent = uptime;
        }
        
        // Format uptime
        function formatUptime(milliseconds) {
            const seconds = Math.floor(milliseconds / 1000);
            const minutes = Math.floor(seconds / 60);
            const hours = Math.floor(minutes / 60);
            const days = Math.floor(hours / 24);
            
            if (days > 0) {
                return `${days}g ${hours % 24}s`;
            } else if (hours > 0) {
                return `${hours}s ${minutes % 60}d`;
            } else if (minutes > 0) {
                return `${minutes}d ${seconds % 60}s`;
            } else {
                return `${seconds}s`;
            }
        }
        
        // Action functions
        function runSecurityScan() {
            console.log('🔍 Running security scan...');
            showSuccess('Güvenlik taraması başlatıldı...');
            
            // Run security scan
            if (window.advancedSecurity) {
                window.advancedSecurity.runVulnerabilityScan();
            }
        }
        
        function optimizePerformance() {
            console.log('⚡ Optimizing performance...');
            showSuccess('Performans optimizasyonu başlatıldı...');
            
            // Run performance optimization
            if (window.performanceOptimizer) {
                window.performanceOptimizer.runInitialOptimization();
            }
        }
        
        function viewSecurityReport() {
            console.log('📊 Viewing security report...');
            showSuccess('Güvenlik raporu açılıyor...');
            
            // Generate security report
            if (window.advancedSecurity) {
                const report = window.advancedSecurity.getSecurityReport();
                console.log('Security Report:', report);
            }
        }
        
        function viewPerformanceReport() {
            console.log('📈 Viewing performance report...');
            showSuccess('Performans raporu açılıyor...');
            
            // Generate performance report
            if (window.performanceOptimizer) {
                const report = window.performanceOptimizer.getOptimizationReport();
                console.log('Performance Report:', report);
            }
        }
        
        function emergencyLockdown() {
            if (confirm('Acil kilitleme işlemini başlatmak istediğinizden emin misiniz?')) {
                console.log('🚨 Emergency lockdown initiated...');
                showError('Acil kilitleme işlemi başlatıldı!');
                
                // Implement emergency lockdown
                if (window.advancedSecurity) {
                    // Block all suspicious IPs
                    // Disable all non-essential services
                    // Send emergency notifications
                }
            }
        }
        
        // Helper functions
        function showError(message) {
            const errorDiv = document.createElement('div');
            errorDiv.className = 'error';
            errorDiv.textContent = message;
            document.querySelector('.security-performance-dashboard').insertBefore(errorDiv, document.querySelector('.dashboard-stats'));
            
            setTimeout(() => errorDiv.remove(), 5000);
        }
        
        function showSuccess(message) {
            const successDiv = document.createElement('div');
            successDiv.className = 'success';
            successDiv.textContent = message;
            document.querySelector('.security-performance-dashboard').insertBefore(successDiv, document.querySelector('.dashboard-stats'));
            
            setTimeout(() => successDiv.remove(), 3000);
        }
    </script>
</body>
</html>
