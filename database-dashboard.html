<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DC TEKNƒ∞K - Database Management Dashboard</title>
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.webmanifest">
    <link rel="icon" href="favicon-new.svg" type="image/svg+xml">
    
    <!-- Chart.js for data visualization -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/date-fns@2.29.3/index.min.js"></script>
    
    <style>
        .database-dashboard {
            padding: 20px;
            max-width: 1400px;
            margin: 0 auto;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        .dashboard-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 30px;
            text-align: center;
        }
        
        .dashboard-title {
            font-size: 2.5rem;
            margin-bottom: 10px;
            font-weight: 700;
        }
        
        .dashboard-subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
        }
        
        .dashboard-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            text-align: center;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.15);
        }
        
        .stat-icon {
            font-size: 3rem;
            margin-bottom: 15px;
        }
        
        .stat-number {
            font-size: 2.5rem;
            font-weight: 700;
            color: #333;
            margin-bottom: 5px;
        }
        
        .stat-label {
            font-size: 1rem;
            color: #666;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .dashboard-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }
        
        .chart-container {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        
        .chart-title {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 20px;
            color: #333;
        }
        
        .data-table {
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .table-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px 25px;
            font-size: 1.3rem;
            font-weight: 600;
        }
        
        .table-content {
            padding: 0;
        }
        
        .table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .table th,
        .table td {
            padding: 15px 20px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }
        
        .table th {
            background: #f8f9fa;
            font-weight: 600;
            color: #333;
        }
        
        .table tr:hover {
            background: #f8f9fa;
        }
        
        .status-badge {
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
        }
        
        .status-active {
            background: #d4edda;
            color: #155724;
        }
        
        .status-pending {
            background: #fff3cd;
            color: #856404;
        }
        
        .status-completed {
            background: #d1ecf1;
            color: #0c5460;
        }
        
        .status-cancelled {
            background: #f8d7da;
            color: #721c24;
        }
        
        .action-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }
        
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            text-align: center;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }
        
        .btn-secondary {
            background: #6c757d;
            color: white;
        }
        
        .btn-secondary:hover {
            background: #5a6268;
            transform: translateY(-2px);
        }
        
        .btn-success {
            background: #28a745;
            color: white;
        }
        
        .btn-success:hover {
            background: #218838;
            transform: translateY(-2px);
        }
        
        .btn-warning {
            background: #ffc107;
            color: #212529;
        }
        
        .btn-warning:hover {
            background: #e0a800;
            transform: translateY(-2px);
        }
        
        .btn-danger {
            background: #dc3545;
            color: white;
        }
        
        .btn-danger:hover {
            background: #c82333;
            transform: translateY(-2px);
        }
        
        .search-filter {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }
        
        .filter-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .filter-group {
            display: flex;
            flex-direction: column;
        }
        
        .filter-label {
            font-weight: 600;
            margin-bottom: 8px;
            color: #333;
        }
        
        .filter-input {
            padding: 12px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }
        
        .filter-input:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .loading {
            text-align: center;
            padding: 40px;
            color: #666;
        }
        
        .error {
            background: #f8d7da;
            color: #721c24;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        
        .success {
            background: #d4edda;
            color: #155724;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        
        @media (max-width: 768px) {
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
            
            .dashboard-stats {
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            }
            
            .filter-row {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="database-dashboard">
        <!-- Header -->
        <div class="dashboard-header">
            <h1 class="dashboard-title">üóÑÔ∏è Database Management Dashboard</h1>
            <p class="dashboard-subtitle">DC TEKNƒ∞K - Veritabanƒ± Y√∂netim Paneli</p>
        </div>
        
        <!-- Statistics Cards -->
        <div class="dashboard-stats">
            <div class="stat-card">
                <div class="stat-icon">üë•</div>
                <div class="stat-number" id="totalCustomers">-</div>
                <div class="stat-label">Toplam M√º≈üteri</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">üîß</div>
                <div class="stat-number" id="totalServices">-</div>
                <div class="stat-label">Aktif Hizmet</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">üìÖ</div>
                <div class="stat-number" id="totalAppointments">-</div>
                <div class="stat-label">Bug√ºnk√º Randevu</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">üí∞</div>
                <div class="stat-number" id="totalRevenue">-</div>
                <div class="stat-label">Aylƒ±k Gelir</div>
            </div>
        </div>
        
        <!-- Search and Filter -->
        <div class="search-filter">
            <h3 style="margin-bottom: 20px; color: #333;">üîç Arama ve Filtreleme</h3>
            <div class="filter-row">
                <div class="filter-group">
                    <label class="filter-label">M√º≈üteri Ara</label>
                    <input type="text" class="filter-input" id="customerSearch" placeholder="M√º≈üteri adƒ± veya email...">
                </div>
                <div class="filter-group">
                    <label class="filter-label">Hizmet T√ºr√º</label>
                    <select class="filter-input" id="serviceFilter">
                        <option value="">T√ºm Hizmetler</option>
                        <option value="Elektrik">Elektrik</option>
                        <option value="Klima">Klima</option>
                        <option value="Motor">Motor</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label class="filter-label">Durum</label>
                    <select class="filter-input" id="statusFilter">
                        <option value="">T√ºm Durumlar</option>
                        <option value="active">Aktif</option>
                        <option value="pending">Beklemede</option>
                        <option value="completed">Tamamlandƒ±</option>
                        <option value="cancelled">ƒ∞ptal</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label class="filter-label">Tarih Aralƒ±ƒüƒ±</label>
                    <input type="date" class="filter-input" id="dateFrom">
                </div>
            </div>
            <div class="action-buttons">
                <button class="btn btn-primary" onclick="searchData()">üîç Ara</button>
                <button class="btn btn-secondary" onclick="clearFilters()">üßπ Temizle</button>
                <button class="btn btn-success" onclick="exportData()">üìä Dƒ±≈üa Aktar</button>
                <button class="btn btn-warning" onclick="refreshData()">üîÑ Yenile</button>
            </div>
        </div>
        
        <!-- Main Dashboard Grid -->
        <div class="dashboard-grid">
            <!-- Revenue Chart -->
            <div class="chart-container">
                <h3 class="chart-title">üí∞ Gelir Trendi (Son 30 G√ºn)</h3>
                <canvas id="revenueChart" width="400" height="200"></canvas>
            </div>
            
            <!-- Recent Orders -->
            <div class="data-table">
                <div class="table-header">
                    üìã Son ƒ∞≈ü Emirleri
                </div>
                <div class="table-content">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>ƒ∞≈ü Emri No</th>
                                <th>M√º≈üteri</th>
                                <th>Hizmet</th>
                                <th>Durum</th>
                                <th>Tutar</th>
                            </tr>
                        </thead>
                        <tbody id="recentOrdersTable">
                            <tr>
                                <td colspan="5" class="loading">Veriler y√ºkleniyor...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        
        <!-- Customer Analytics -->
        <div class="chart-container" style="margin-bottom: 30px;">
            <h3 class="chart-title">üë• M√º≈üteri Analizi</h3>
            <canvas id="customerChart" width="400" height="200"></canvas>
        </div>
        
        <!-- Service Performance -->
        <div class="dashboard-grid">
            <div class="chart-container">
                <h3 class="chart-title">üîß Hizmet Performansƒ±</h3>
                <canvas id="serviceChart" width="400" height="200"></canvas>
            </div>
            
            <!-- Top Customers -->
            <div class="data-table">
                <div class="table-header">
                    üèÜ En ƒ∞yi M√º≈üteriler
                </div>
                <div class="table-content">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>M√º≈üteri</th>
                                <th>Toplam Sipari≈ü</th>
                                <th>Toplam Harcama</th>
                                <th>Ortalama Puan</th>
                            </tr>
                        </thead>
                        <tbody id="topCustomersTable">
                            <tr>
                                <td colspan="4" class="loading">Veriler y√ºkleniyor...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        
        <!-- Inventory Status -->
        <div class="chart-container" style="margin-bottom: 30px;">
            <h3 class="chart-title">üì¶ Stok Durumu</h3>
            <canvas id="inventoryChart" width="400" height="200"></canvas>
        </div>
        
        <!-- System Performance -->
        <div class="dashboard-grid">
            <div class="chart-container">
                <h3 class="chart-title">‚ö° Sistem Performansƒ±</h3>
                <canvas id="performanceChart" width="400" height="200"></canvas>
            </div>
            
            <!-- Database Status -->
            <div class="data-table">
                <div class="table-header">
                    üóÑÔ∏è Veritabanƒ± Durumu
                </div>
                <div class="table-content">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Tablo</th>
                                <th>Kayƒ±t Sayƒ±sƒ±</th>
                                <th>Son G√ºncelleme</th>
                                <th>Durum</th>
                            </tr>
                        </thead>
                        <tbody id="databaseStatusTable">
                            <tr>
                                <td colspan="4" class="loading">Veriler y√ºkleniyor...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        
        <!-- Action Buttons -->
        <div class="action-buttons" style="justify-content: center; margin-top: 30px;">
            <button class="btn btn-primary" onclick="openDataManager()">üìä Veri Y√∂neticisi</button>
            <button class="btn btn-success" onclick="runBackup()">üíæ Yedek Al</button>
            <button class="btn btn-warning" onclick="optimizeDatabase()">‚ö° Optimize Et</button>
            <button class="btn btn-danger" onclick="showMaintenance()">üîß Bakƒ±m</button>
        </div>
    </div>
    
    <!-- Scripts -->
    <script src="js/data-models.js"></script>
    <script src="js/api-endpoints.js"></script>
    <script src="js/query-engine.js"></script>
    <script src="js/performance-metrics.js"></script>
    
    <script>
        // Global variables
        let charts = {};
        let dashboardData = {};
        
        // Initialize dashboard
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üóÑÔ∏è Database Dashboard initialized');
            initializeCharts();
            loadDashboardData();
            setupEventListeners();
        });
        
        // Initialize charts
        function initializeCharts() {
            // Revenue Chart
            const revenueCtx = document.getElementById('revenueChart').getContext('2d');
            charts.revenue = new Chart(revenueCtx, {
                type: 'line',
                data: {
                    labels: [],
                    datasets: [{
                        label: 'G√ºnl√ºk Gelir',
                        data: [],
                        borderColor: '#667eea',
                        backgroundColor: 'rgba(102, 126, 234, 0.1)',
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            display: true,
                            position: 'top'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return '‚Ç∫' + value.toLocaleString();
                                }
                            }
                        }
                    }
                }
            });
            
            // Customer Chart
            const customerCtx = document.getElementById('customerChart').getContext('2d');
            charts.customer = new Chart(customerCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Bireysel', 'Kurumsal', 'VIP'],
                    datasets: [{
                        data: [0, 0, 0],
                        backgroundColor: ['#667eea', '#764ba2', '#f093fb'],
                        borderWidth: 2,
                        borderColor: '#fff'
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    }
                }
            });
            
            // Service Chart
            const serviceCtx = document.getElementById('serviceChart').getContext('2d');
            charts.service = new Chart(serviceCtx, {
                type: 'bar',
                data: {
                    labels: [],
                    datasets: [{
                        label: 'Sipari≈ü Sayƒ±sƒ±',
                        data: [],
                        backgroundColor: '#667eea',
                        borderColor: '#764ba2',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
            
            // Inventory Chart
            const inventoryCtx = document.getElementById('inventoryChart').getContext('2d');
            charts.inventory = new Chart(inventoryCtx, {
                type: 'pie',
                data: {
                    labels: ['Yeterli Stok', 'D√º≈ü√ºk Stok', 'Stok Yok'],
                    datasets: [{
                        data: [0, 0, 0],
                        backgroundColor: ['#28a745', '#ffc107', '#dc3545'],
                        borderWidth: 2,
                        borderColor: '#fff'
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    }
                }
            });
            
            // Performance Chart
            const performanceCtx = document.getElementById('performanceChart').getContext('2d');
            charts.performance = new Chart(performanceCtx, {
                type: 'line',
                data: {
                    labels: [],
                    datasets: [{
                        label: 'Sorgu S√ºresi (ms)',
                        data: [],
                        borderColor: '#28a745',
                        backgroundColor: 'rgba(40, 167, 69, 0.1)',
                        tension: 0.4
                    }, {
                        label: 'Cache Hit Rate (%)',
                        data: [],
                        borderColor: '#ffc107',
                        backgroundColor: 'rgba(255, 193, 7, 0.1)',
                        tension: 0.4,
                        yAxisID: 'y1'
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            display: true,
                            position: 'top'
                        }
                    },
                    scales: {
                        y: {
                            type: 'linear',
                            display: true,
                            position: 'left'
                        },
                        y1: {
                            type: 'linear',
                            display: true,
                            position: 'right',
                            grid: {
                                drawOnChartArea: false
                            }
                        }
                    }
                }
            });
        }
        
        // Load dashboard data
        async function loadDashboardData() {
            try {
                console.log('üìä Loading dashboard data...');
                
                // Load statistics
                await loadStatistics();
                
                // Load charts data
                await loadChartsData();
                
                // Load tables data
                await loadTablesData();
                
                console.log('‚úÖ Dashboard data loaded successfully');
            } catch (error) {
                console.error('‚ùå Error loading dashboard data:', error);
                showError('Veri y√ºklenirken hata olu≈ütu: ' + error.message);
            }
        }
        
        // Load statistics
        async function loadStatistics() {
            try {
                // Mock data - replace with actual API calls
                const stats = {
                    totalCustomers: 1250,
                    totalServices: 15,
                    totalAppointments: 45,
                    totalRevenue: 125000
                };
                
                document.getElementById('totalCustomers').textContent = stats.totalCustomers.toLocaleString();
                document.getElementById('totalServices').textContent = stats.totalServices;
                document.getElementById('totalAppointments').textContent = stats.totalAppointments;
                document.getElementById('totalRevenue').textContent = '‚Ç∫' + stats.totalRevenue.toLocaleString();
                
                dashboardData.statistics = stats;
            } catch (error) {
                console.error('Error loading statistics:', error);
            }
        }
        
        // Load charts data
        async function loadChartsData() {
            try {
                // Revenue trend data
                const revenueData = generateRevenueData();
                charts.revenue.data.labels = revenueData.labels;
                charts.revenue.data.datasets[0].data = revenueData.values;
                charts.revenue.update();
                
                // Customer distribution data
                const customerData = [800, 400, 50]; // Individual, Corporate, VIP
                charts.customer.data.datasets[0].data = customerData;
                charts.customer.update();
                
                // Service performance data
                const serviceData = generateServiceData();
                charts.service.data.labels = serviceData.labels;
                charts.service.data.datasets[0].data = serviceData.values;
                charts.service.update();
                
                // Inventory status data
                const inventoryData = [120, 25, 5]; // Sufficient, Low, Out
                charts.inventory.data.datasets[0].data = inventoryData;
                charts.inventory.update();
                
                // Performance data
                const performanceData = generatePerformanceData();
                charts.performance.data.labels = performanceData.labels;
                charts.performance.data.datasets[0].data = performanceData.queryTime;
                charts.performance.data.datasets[1].data = performanceData.cacheHitRate;
                charts.performance.update();
                
            } catch (error) {
                console.error('Error loading charts data:', error);
            }
        }
        
        // Load tables data
        async function loadTablesData() {
            try {
                // Recent orders table
                const recentOrders = generateRecentOrders();
                updateRecentOrdersTable(recentOrders);
                
                // Top customers table
                const topCustomers = generateTopCustomers();
                updateTopCustomersTable(topCustomers);
                
                // Database status table
                const dbStatus = generateDatabaseStatus();
                updateDatabaseStatusTable(dbStatus);
                
            } catch (error) {
                console.error('Error loading tables data:', error);
            }
        }
        
        // Generate mock data
        function generateRevenueData() {
            const labels = [];
            const values = [];
            const today = new Date();
            
            for (let i = 29; i >= 0; i--) {
                const date = new Date(today);
                date.setDate(date.getDate() - i);
                labels.push(date.toLocaleDateString('tr-TR', { month: 'short', day: 'numeric' }));
                values.push(Math.floor(Math.random() * 5000) + 1000);
            }
            
            return { labels, values };
        }
        
        function generateServiceData() {
            const services = ['Dinamo Tamiri', 'Alternat√∂r Tamiri', 'Mar≈ü Motoru', 'Klima Kompres√∂r', 'Elektrik Te≈ühis'];
            const values = services.map(() => Math.floor(Math.random() * 100) + 10);
            
            return { labels: services, values };
        }
        
        function generatePerformanceData() {
            const labels = [];
            const queryTime = [];
            const cacheHitRate = [];
            
            for (let i = 11; i >= 0; i--) {
                const hour = new Date();
                hour.setHours(hour.getHours() - i);
                labels.push(hour.toLocaleTimeString('tr-TR', { hour: '2-digit', minute: '2-digit' }));
                queryTime.push(Math.floor(Math.random() * 100) + 50);
                cacheHitRate.push(Math.floor(Math.random() * 30) + 70);
            }
            
            return { labels, queryTime, cacheHitRate };
        }
        
        function generateRecentOrders() {
            return [
                { orderNumber: 'WO-2024-001', customer: 'ABC Tekstil', service: 'Dinamo Tamiri', status: 'completed', amount: 1500 },
                { orderNumber: 'WO-2024-002', customer: 'XYZ ƒ∞n≈üaat', service: 'Alternat√∂r Tamiri', status: 'in_progress', amount: 2200 },
                { orderNumber: 'WO-2024-003', customer: 'DEF Otomotiv', service: 'Mar≈ü Motoru', status: 'pending', amount: 1800 },
                { orderNumber: 'WO-2024-004', customer: 'GHI Makine', service: 'Klima Kompres√∂r', status: 'completed', amount: 3500 },
                { orderNumber: 'WO-2024-005', customer: 'JKL Nakliyat', service: 'Elektrik Te≈ühis', status: 'completed', amount: 800 }
            ];
        }
        
        function generateTopCustomers() {
            return [
                { customer: 'ABC Tekstil', orders: 45, spending: 125000, rating: 4.8 },
                { customer: 'XYZ ƒ∞n≈üaat', orders: 38, spending: 98000, rating: 4.6 },
                { customer: 'DEF Otomotiv', orders: 32, spending: 87000, rating: 4.7 },
                { customer: 'GHI Makine', orders: 28, spending: 75000, rating: 4.9 },
                { customer: 'JKL Nakliyat', orders: 25, spending: 68000, rating: 4.5 }
            ];
        }
        
        function generateDatabaseStatus() {
            return [
                { table: 'customers', records: 1250, lastUpdate: '2024-01-15 14:30', status: 'active' },
                { table: 'services', records: 15, lastUpdate: '2024-01-15 14:25', status: 'active' },
                { table: 'appointments', records: 2847, lastUpdate: '2024-01-15 14:35', status: 'active' },
                { table: 'work_orders', records: 2156, lastUpdate: '2024-01-15 14:32', status: 'active' },
                { table: 'inventory', records: 150, lastUpdate: '2024-01-15 14:28', status: 'active' }
            ];
        }
        
        // Update tables
        function updateRecentOrdersTable(orders) {
            const tbody = document.getElementById('recentOrdersTable');
            tbody.innerHTML = '';
            
            orders.forEach(order => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${order.orderNumber}</td>
                    <td>${order.customer}</td>
                    <td>${order.service}</td>
                    <td><span class="status-badge status-${order.status}">${getStatusText(order.status)}</span></td>
                    <td>‚Ç∫${order.amount.toLocaleString()}</td>
                `;
                tbody.appendChild(row);
            });
        }
        
        function updateTopCustomersTable(customers) {
            const tbody = document.getElementById('topCustomersTable');
            tbody.innerHTML = '';
            
            customers.forEach(customer => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${customer.customer}</td>
                    <td>${customer.orders}</td>
                    <td>‚Ç∫${customer.spending.toLocaleString()}</td>
                    <td>${customer.rating}/5</td>
                `;
                tbody.appendChild(row);
            });
        }
        
        function updateDatabaseStatusTable(status) {
            const tbody = document.getElementById('databaseStatusTable');
            tbody.innerHTML = '';
            
            status.forEach(item => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${item.table}</td>
                    <td>${item.records.toLocaleString()}</td>
                    <td>${item.lastUpdate}</td>
                    <td><span class="status-badge status-${item.status}">${getStatusText(item.status)}</span></td>
                `;
                tbody.appendChild(row);
            });
        }
        
        // Helper functions
        function getStatusText(status) {
            const statusMap = {
                'active': 'Aktif',
                'pending': 'Beklemede',
                'completed': 'Tamamlandƒ±',
                'cancelled': 'ƒ∞ptal',
                'in_progress': 'Devam Ediyor'
            };
            return statusMap[status] || status;
        }
        
        function showError(message) {
            const errorDiv = document.createElement('div');
            errorDiv.className = 'error';
            errorDiv.textContent = message;
            document.querySelector('.database-dashboard').insertBefore(errorDiv, document.querySelector('.dashboard-stats'));
        }
        
        function showSuccess(message) {
            const successDiv = document.createElement('div');
            successDiv.className = 'success';
            successDiv.textContent = message;
            document.querySelector('.database-dashboard').insertBefore(successDiv, document.querySelector('.dashboard-stats'));
        }
        
        // Event listeners
        function setupEventListeners() {
            // Search functionality
            document.getElementById('customerSearch').addEventListener('input', debounce(searchData, 300));
            document.getElementById('serviceFilter').addEventListener('change', searchData);
            document.getElementById('statusFilter').addEventListener('change', searchData);
            document.getElementById('dateFrom').addEventListener('change', searchData);
        }
        
        // Debounce function
        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }
        
        // Action functions
        function searchData() {
            const searchTerm = document.getElementById('customerSearch').value;
            const serviceFilter = document.getElementById('serviceFilter').value;
            const statusFilter = document.getElementById('statusFilter').value;
            const dateFrom = document.getElementById('dateFrom').value;
            
            console.log('üîç Searching with filters:', { searchTerm, serviceFilter, statusFilter, dateFrom });
            
            // Implement search logic here
            showSuccess('Arama tamamlandƒ±!');
        }
        
        function clearFilters() {
            document.getElementById('customerSearch').value = '';
            document.getElementById('serviceFilter').value = '';
            document.getElementById('statusFilter').value = '';
            document.getElementById('dateFrom').value = '';
            
            console.log('üßπ Filters cleared');
            showSuccess('Filtreler temizlendi!');
        }
        
        function exportData() {
            console.log('üìä Exporting data...');
            showSuccess('Veriler dƒ±≈üa aktarƒ±lƒ±yor...');
        }
        
        function refreshData() {
            console.log('üîÑ Refreshing data...');
            loadDashboardData();
            showSuccess('Veriler yenilendi!');
        }
        
        function openDataManager() {
            console.log('üìä Opening data manager...');
            showSuccess('Veri y√∂neticisi a√ßƒ±lƒ±yor...');
        }
        
        function runBackup() {
            console.log('üíæ Running backup...');
            showSuccess('Yedekleme ba≈ülatƒ±ldƒ±!');
        }
        
        function optimizeDatabase() {
            console.log('‚ö° Optimizing database...');
            showSuccess('Veritabanƒ± optimize ediliyor...');
        }
        
        function showMaintenance() {
            console.log('üîß Showing maintenance options...');
            showSuccess('Bakƒ±m se√ßenekleri g√∂steriliyor...');
        }
        
        // Auto-refresh every 5 minutes
        setInterval(() => {
            console.log('üîÑ Auto-refreshing dashboard data...');
            loadDashboardData();
        }, 5 * 60 * 1000);
    </script>
</body>
</html>
